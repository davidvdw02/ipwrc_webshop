name: Deploy to Hostinger VPS with Docker

on:
  pull_request:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set up JDK 17
        uses: actions/setup-java@v2
        with:
          distribution: 'adopt'
          java-version: '17'

      - name: Build Docker Image
        run: docker build -t spring-boot .

      - name: Deploy to Hostinger VPS
        uses: appleboy/ssh-action@master
        with:
          host: 149.100.156.79
          username: root
          key: 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
          script: |
            ssh -o StrictHostKeyChecking=no root@149.100.156.79 'bash -s' < deploy.sh
